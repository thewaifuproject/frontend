(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{252:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});function a(t){if(window.localStorage){null==window.localStorage.getItem("waifuchain")&&window.localStorage.setItem("waifuchain",JSON.stringify({logbids:{},tutorial:{auction:!0,bid:!0,beforeReveal:!0,afterReveal:!0}}));var e=JSON.parse(window.localStorage.getItem("waifuchain"));return!e.logbids.hasOwnProperty(t)&&t&&(e.logbids[t]={}),e}return null}function i(){var t=a();t.tutorial={auction:!0,bid:!0,beforeReveal:!0,afterReveal:!0},window.localStorage.setItem("waifuchain",JSON.stringify(t))}function o(t){if(!a().tutorial){var e=a();e.tutorial={auction:!0,bid:!0,beforeReveal:!0,afterReveal:!0},window.localStorage.setItem("waifuchain",JSON.stringify(e))}switch(t){case"auction":return a().tutorial[t];case"bid":return a().tutorial[t]&&!a().tutorial.auction;case"beforeReveal":return a().tutorial[t]&&!a().tutorial.auction&&!a().tutorial.bid;case"afterReveal":return a().tutorial[t]&&!a().tutorial.auction&&!a().tutorial.bid&&!a().tutorial.beforeReveal;default:return a().tutorial[t]}}function s(t){var e=a();e&&(e.tutorial[t]=!1,console.log(t),window.localStorage.setItem("waifuchain",JSON.stringify(e)))}},258:function(t,e,n){"use strict";n.d(e,"e",function(){return m}),n.d(e,"d",function(){return f}),n.d(e,"f",function(){return h}),n.d(e,"l",function(){return y}),n.d(e,"i",function(){return b}),n.d(e,"h",function(){return w}),n.d(e,"c",function(){return v}),n.d(e,"g",function(){return k}),n.d(e,"b",function(){return E}),n.d(e,"a",function(){return I}),n.d(e,"j",function(){return O}),n.d(e,"m",function(){return j}),n.d(e,"k",function(){return g});var a,i=n(310),o=n(371),s=n.n(o),u=n(339),l=n.n(u),r=n(252),p="1543902712",c=new((a="undefined"!==typeof window.web3?new s.a(window.web3.currentProvider):new s.a(new s.a.providers.HttpProvider("http://localhost:8545"))).eth.Contract)(l.a.ABI,l.a.contractAddress);function m(){return Number(p)}function d(t){a.eth.getAccounts().then(function(e){t(e[0])})}function f(t){var e=Number(p),n=(new Date).getTime()+(864e5-((new Date).getTime()-1e3*e)%864e5),a=Math.floor((new Date-1e3*e)/864e5),i=Math.floor(a/30);if(i>3)return[];var o=Math.pow(2,3-i);return[n,t>=450-(1-Math.pow(2,4-i))/-1*30+o*(a%30)]}function h(){var t=Math.floor((new Date-1e3*Number(p))/864e5),e=Math.floor(t/30);if(e>3)return[];var n=Math.pow(2,3-e),a=450-(1-Math.pow(2,4-e))/-1*30+n*(t%30);return Object(i.a)(Array(n).keys()).map(function(t){return t+a})}function y(t,e,n,i,o){a.eth.getAccounts().then(function(s){i(!s.length),s.length&&(console.log(s[0],t,e,n),o(),function(t,e,n,i){var o=a.utils.randomHex(32);c.methods.bid(parseInt(e),a.utils.soliditySha3({type:"uint256",value:a.utils.toWei(n)},{type:"bool",value:!1},{type:"bytes32",value:o})).send({from:t,value:a.utils.toWei(i)}).on("transactionHash",function(a){!function(t,e,n,a,i){var o={real:[n],fake:[a],secret:[i]},s=Object(r.c)(t);s&&(s.logbids[t].hasOwnProperty(e)?(s.logbids[t][e].real.push(o.real[0]),s.logbids[t][e].fake.push(o.fake[0]),s.logbids[t][e].secret.push(o.secret[0])):s.logbids[t][e]=o,window.localStorage.setItem("waifuchain",JSON.stringify(s)))}(t,e,n,i,o)})}(s[0],t,e,n))})}function b(t){var e=Math.floor((new Date-1e3*Number(p))/864e5)-1,n=Math.floor(e/30);if(n>3)return[];var o=Math.pow(2,3-n),s=450-(1-Math.pow(2,4-n))/-1*30+o*(e%30),u=Object(i.a)(Array(o).keys()).map(function(t){return t+s}),l=JSON.parse(window.localStorage.getItem("waifuchain")).logbids,r=0;Object.keys(l).map(function(t){Object.keys(l[t]).map(function(t){if(u.indexOf(parseInt(t))<0)return-1;r++})});var m=0;Object.keys(l).map(function(e){Object.keys(l[e]).map(function(n){if(console.log(u),u.indexOf(parseInt(n))<0)return-1;var i=[];l[e][n].real.forEach(function(t){return i.push(a.utils.toWei(t))});var o=[];l[e][n].fake.forEach(function(t){return o.push(!1)});var s=[];l[e][n].secret.forEach(function(t){return s.push(t)}),console.log("Reveal params: ",parseInt(n),i,o,s),c.methods.reveal(parseInt(n),i,o,s).send({from:e}).then(function(){console.log(parseInt(n),i,o,s)}).on("transactionHash",function(e){++m>=r&&t()})})})}function g(t,e,n){var a,i=n.trim().replace(/^@+/gm,"");d(function(n){switch(e){case"Discord":a="discordapp.com/"+i;break;case"Twitter":a="twitter.com/"+i}c.methods.setWaifuProfile(parseInt(t),a).send({from:n})})}function w(t,e){d(function(n){var a=0,i=0,o=Object(r.c)(n).logbids;Object.keys(o).map(function(t){Object.keys(o[t]).map(function(t){a++})}),null!=o?(console.log(o),Object.keys(o).map(function(s){Object.keys(o[s]).map(function(o){c.methods.highestBidder(parseInt(o)).call().then(function(s){i++,t(o,s,n),e(a<=i)})})})):console.log("no storage")})}function v(t){d(function(e){c.methods.claimWaifu(parseInt(t)).send({from:e}).then(function(){console.log("Claimed ",t)})})}function k(t){d(function(e){e&&c.methods.balanceOf(e).call().then(function(n){console.log("balanceOf(account): ",n,[e]);for(var a=0;a<n;a++)c.methods.tokenOfOwnerByIndex(e,a).call().then(function(e){t(e)})})})}function O(t,e){d(function(n){console.log(n,e),c.methods.safeTransferFrom(n,t,e).send({from:n}).then(function(){return console.log("safeTransferFrom",n,t,e,"sent")})})}function E(){return"undefined"!==typeof a}function I(t){a.eth.net.getId().then(function(e){t(4==e),console.log(e)})}function j(){d(function(t){c.methods.withdraw().send({from:t})})}},311:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(85),o=n(86),s=n(89),u=n(87),l=n(88),r=n(90),p=n(1),c=n.n(p),m=n(241),d=(n(604),n(258)),f=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={modal:!1,address2send:""},n.toggle=n.toggle.bind(Object(r.a)(Object(r.a)(n))),n.handleAddressInputChange=n.handleAddressInputChange.bind(Object(r.a)(Object(r.a)(n))),n.sendWaifu=n.sendWaifu.bind(Object(r.a)(Object(r.a)(n))),n}return Object(l.a)(e,t),Object(o.a)(e,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"handleAddressInputChange",value:function(t){this.setState({address2send:t.target.value})}},{key:"sendWaifu",value:function(){d.j(this.state.address2send,this.props.waifuID),this.toggle()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.e,{color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight",onClick:this.toggle},this.props.mainButtonText),c.a.createElement(m.T,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className,centered:!0,fade:!1},c.a.createElement(m.U,null,c.a.createElement("p",null,"Do you want to send ",this.props.waifuName," to someone else?"),c.a.createElement(m.J,null,c.a.createElement(m.K,{addonType:"prepend"},"Address"),c.a.createElement(m.I,{placeholder:"0x56c77d84caf29adc6f0bCd02e51a8a33a13Ed749",onChange:this.handleAddressInputChange}),c.a.createElement(m.K,{addonType:"prepend"},c.a.createElement(m.e,{color:"purple",onClick:this.sendWaifu},"Send"))))))}}]),e}(c.a.Component),h=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={modalP:!1,profile2set:"",splitButtonOpen:!1,currentNet:"Social network"},n.toggleP=n.toggleP.bind(Object(r.a)(Object(r.a)(n))),n.handleProfileInputChange=n.handleProfileInputChange.bind(Object(r.a)(Object(r.a)(n))),n.sendSetWaifuProfile=n.sendSetWaifuProfile.bind(Object(r.a)(Object(r.a)(n))),n.changeSNetwork=n.changeSNetwork.bind(Object(r.a)(Object(r.a)(n))),n}return Object(l.a)(e,t),Object(o.a)(e,[{key:"toggleSplit",value:function(){this.setState({splitButtonOpen:!this.state.splitButtonOpen})}},{key:"toggleP",value:function(){this.setState({modalP:!this.state.modalP})}},{key:"handleProfileInputChange",value:function(t){this.setState({profile2set:t.target.value})}},{key:"sendSetWaifuProfile",value:function(){console.log(this.state.profile2set,this.props.waifuID),d.k(this.props.waifuID,this.state.currentNet,this.state.profile2set),this.toggleP()}},{key:"changeSNetwork",value:function(t){this.setState({currentNet:t.target.id})}},{key:"render",value:function(){var t=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.T,{isOpen:this.props.isopen,toggle:this.props.toggleFunction,className:this.props.className,centered:!0,fade:!1},c.a.createElement(m.U,null,c.a.createElement("p",null,"Assign ",this.props.waifuName," to a profile"),c.a.createElement(m.J,null,c.a.createElement(m.L,{addonType:"prepend",isOpen:this.state.splitButtonOpen,toggle:function(){return t.toggleSplit()}},c.a.createElement(m.C,{caret:!0,color:"purple"},this.state.currentNet),c.a.createElement(m.B,null,c.a.createElement(m.A,{id:"Twitter",onClick:this.changeSNetwork},"Twitter"),c.a.createElement(m.A,{id:"Discord",onClick:this.changeSNetwork},"Discord"))),c.a.createElement(m.I,{placeholder:"@thewaifuproject",onChange:this.handleProfileInputChange}),c.a.createElement(m.K,{addonType:"append"},c.a.createElement(m.e,{color:"purple",onClick:this.sendSetWaifuProfile},"Assign"))))))}}]),e}(c.a.Component),y=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(s.a)(this,Object(u.a)(e).call(this,t))).handleButtonClick=function(){var t="#/waifus/".concat(n.props.id);window.location=t},n.handleButtonClick=n.handleButtonClick.bind(Object(r.a)(Object(r.a)(n))),n.toggle=n.toggle.bind(Object(r.a)(Object(r.a)(n))),n.claim=n.claim.bind(Object(r.a)(Object(r.a)(n))),n.state={dropdownOpen:!1,waifuShortBio:"",waifuName:"",buttonColor:"purple",isopenSW:!1},n}return Object(l.a)(e,t),Object(o.a)(e,[{key:"toggle",value:function(){this.setState(function(t){return{dropdownOpen:!t.dropdownOpen}})}},{key:"componentWillMount",value:function(){var t=this;fetch("https://api.waifuchain.moe/?waifu="+this.props.id).then(function(t){return t.clone().json()}).then(function(e){t.setState({waifuName:e.name,waifuImage:e.image,waifuDescription:e.description,waifuShortBio:b(e.description,50)})}).catch(function(t){console.log("Hubo un problema con la petici\xf3n Fetch:"+t.message)})}},{key:"componentWillUpdate",value:function(t,e){}},{key:"claim",value:function(){"claim"===this.props.typeT&&d.c(this.props.id)}},{key:"toggleModalSetProfile",value:function(){this.setState({isopenSW:!this.state.isopenSW})}},{key:"render",value:function(){var t=this,e=c.a.createElement(m.j,null,c.a.createElement(m.q,null,this.state.waifuName),c.a.createElement(m.p,null,b(this.state.waifuShortBio,50)),c.a.createElement(m.g,{className:"d-flex bd-highlight"},c.a.createElement("a",{className:"nostile width100",href:"https://waifu.wiki/index.php/"+this.state.waifuName.replace(" ","_"),target:"__blank"},c.a.createElement(m.e,{color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight width100",onClick:this.claim},this.props.mainButtonText))));if("drop"===this.props.typeT)e=c.a.createElement(m.j,null,c.a.createElement(m.q,null,this.state.waifuName),c.a.createElement(m.p,null,b(this.state.waifuShortBio,50)),c.a.createElement(m.g,{className:"d-flex bd-highlight"},c.a.createElement(m.e,{id:"buttontourjs",color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight",onClick:this.handleButtonClick},this.props.mainButtonText),c.a.createElement(m.f,{isOpen:this.state.dropdownOpen,toggle:this.toggle},c.a.createElement(m.C,{color:this.props.buttonColor,caret:!0}),c.a.createElement(m.B,null,c.a.createElement("a",{className:"nostile",href:"https://waifu.wiki/index.php/"+this.state.waifuName.replace(" ","_"),target:"__blank"},c.a.createElement(m.A,{className:"pointa"},"See on the wiki"))))));else if("claim"===this.props.typeT)e=c.a.createElement(m.j,null,c.a.createElement(m.q,null,this.state.waifuName),c.a.createElement(m.p,null,b(this.state.waifuShortBio,50)),c.a.createElement(m.g,{className:"d-flex bd-highlight"},c.a.createElement(m.e,{color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight width100",onClick:this.claim},this.props.mainButtonText)));else if("wallet"===this.props.typeT){var n,i;e=c.a.createElement(m.j,null,c.a.createElement(m.q,null,this.state.waifuName),c.a.createElement(m.p,null,b(this.state.waifuShortBio,50)),c.a.createElement(m.g,{className:"d-flex bd-highlight"},c.a.createElement(h,(a(n={toggleFunction:this.toggleModalSetProfile.bind(this),isopen:this.state.isopenSW,mainButtonText:this.props.mainButtonText,buttonColor:this.props.buttonColor},"mainButtonText",this.props.mainButtonText),a(n,"waifuName",this.state.waifuName),a(n,"waifuID",this.props.id),n)),c.a.createElement(f,(a(i={mainButtonText:this.props.mainButtonText,buttonColor:this.props.buttonColor},"mainButtonText",this.props.mainButtonText),a(i,"waifuName",this.state.waifuName),a(i,"waifuID",this.props.id),i)),c.a.createElement(m.f,{isOpen:this.state.dropdownOpen,toggle:this.toggle},c.a.createElement(m.C,{color:this.props.buttonColor,caret:!0}),c.a.createElement(m.B,null,c.a.createElement("a",{className:"nostile"},c.a.createElement(m.A,{className:"pointa",onClick:function(){return t.toggleModalSetProfile()}},"Assign to profile")),c.a.createElement("a",{className:"nostile",href:"https://waifu.wiki/index.php/"+this.state.waifuName.replace(" ","_"),target:"__blank"},c.a.createElement(m.A,{className:"pointa"},"See on the wiki"))))))}return c.a.createElement("div",null,c.a.createElement(m.i,null,c.a.createElement(m.o,{className:"fixedH-auction",width:"100%",src:this.state.waifuImage,alt:this.state.waifuImage}),e))}}]),e}(p.Component);function b(t,e){return t.slice(0,e)+(t.length>e?"...":"")}e.a=y},339:function(t,e){t.exports.contractAddress="0x76ffb21b2c004e39aef756484c980ce8c81b7bd0",t.exports.ABI=[{constant:!0,inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_owner",type:"address"}],name:"voteFundOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"_tokenToProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBidder",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_URL",type:"string"}],name:"setBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_values",type:"uint256[]"},{name:"_fake",type:"bool[]"},{name:"_secret",type:"bytes32[]"}],name:"reveal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_profile",type:"string"}],name:"setWaifuProfile",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],name:"bids",outputs:[{name:"blindedBid",type:"bytes32"},{name:"deposit",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_profile",type:"string"}],name:"getWaifusInProfile",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"waifuIndex",type:"uint256"}],name:"claimWaifu",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBid",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"creationTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"}],name:"transferFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_blindedBid",type:"bytes32"}],name:"bid",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_URL",type:"string"}],name:"voteBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getWaifuProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"waifuIndex",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"approved",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"}]},384:function(t,e){},385:function(t,e){},397:function(t,e){},404:function(t,e){},405:function(t,e){},424:function(t,e){},604:function(t,e,n){}}]);
//# sourceMappingURL=2.5636349f.chunk.js.map