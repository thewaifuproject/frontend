(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{250:function(t,e,n){"use strict";n.d(e,"e",function(){return l}),n.d(e,"d",function(){return d}),n.d(e,"f",function(){return m}),n.d(e,"k",function(){return b}),n.d(e,"i",function(){return w}),n.d(e,"h",function(){return v}),n.d(e,"c",function(){return h}),n.d(e,"g",function(){return g}),n.d(e,"b",function(){return I}),n.d(e,"a",function(){return k}),n.d(e,"j",function(){return M}),n.d(e,"l",function(){return O});var a,o=n(296),i=n(328),u=n.n(i),s=n(294),p=n.n(s),r=n(255),c="1543902712",y=new((a="undefined"!==typeof window.web3?new u.a(window.web3.currentProvider):new u.a(new u.a.providers.HttpProvider("http://localhost:8545"))).eth.Contract)(p.a.ABI,p.a.contractAddress);function l(){return Number(c)}function f(t){a.eth.getAccounts().then(function(e){t(e[0])})}function d(t){var e=Number(c),n=(new Date).getTime()+(864e5-((new Date).getTime()-1e3*e)%864e5),a=Math.floor((new Date-1e3*e)/864e5),o=Math.floor(a/30);if(o>3)return[];var i=Math.pow(2,3-o);return[n,t>=450-(1-Math.pow(2,4-o))/-1*30+i*(a%30)]}function m(){var t=Math.floor((new Date-1e3*Number(c))/864e5),e=Math.floor(t/30);if(e>3)return[];var n=Math.pow(2,3-e),a=450-(1-Math.pow(2,4-e))/-1*30+n*(t%30);return Object(o.a)(Array(n).keys()).map(function(t){return t+a})}function b(t,e,n,o,i){a.eth.getAccounts().then(function(u){o(!u.length),u.length&&(console.log(u[0],t,e,n),i(),function(t,e,n,o){var i=a.utils.randomHex(32);y.methods.bid(parseInt(e),a.utils.soliditySha3({type:"uint256",value:a.utils.toWei(n)},{type:"bool",value:!1},{type:"bytes32",value:i})).send({from:t,value:a.utils.toWei(o)}).on("transactionHash",function(a){!function(t,e,n,a,o){var i={real:[n],fake:[a],secret:[o]},u=Object(r.c)(t);u&&(u.logbids[t].hasOwnProperty(e)?(u.logbids[t][e].real.push(i.real[0]),u.logbids[t][e].fake.push(i.fake[0]),u.logbids[t][e].secret.push(i.secret[0])):u.logbids[t][e]=i,window.localStorage.setItem("waifuchain",JSON.stringify(u)))}(t,e,n,o,i)})}(u[0],t,e,n))})}function w(t){var e=Math.floor((new Date-1e3*Number(c))/864e5)-1,n=Math.floor(e/30);if(n>3)return[];var i=Math.pow(2,3-n),u=450-(1-Math.pow(2,4-n))/-1*30+i*(e%30),s=Object(o.a)(Array(i).keys()).map(function(t){return t+u}),p=JSON.parse(window.localStorage.getItem("waifuchain")).logbids,r=0;Object.keys(p).map(function(t){Object.keys(p[t]).map(function(t){if(s.indexOf(parseInt(t))<0)return-1;r++})});var l=0;Object.keys(p).map(function(e){Object.keys(p[e]).map(function(n){if(console.log(s),s.indexOf(parseInt(n))<0)return-1;var o=[];p[e][n].real.forEach(function(t){return o.push(a.utils.toWei(t))});var i=[];p[e][n].fake.forEach(function(t){return i.push(!1)});var u=[];p[e][n].secret.forEach(function(t){return u.push(t)}),console.log("Reveal params: ",parseInt(n),o,i,u),y.methods.reveal(parseInt(n),o,i,u).send({from:e}).then(function(){console.log(parseInt(n),o,i,u)}).on("transactionHash",function(e){++l>=r&&t()})})})}function v(t,e){f(function(n){var a=0,o=0,i=Object(r.c)(n).logbids;Object.keys(i).map(function(t){Object.keys(i[t]).map(function(t){a++})}),null!=i?(console.log(i),Object.keys(i).map(function(u){Object.keys(i[u]).map(function(i){y.methods.highestBidder(parseInt(i)).call().then(function(u){o++,t(i,u,n),e(a<=o)})})})):console.log("no storage")})}function h(t){f(function(e){y.methods.claimWaifu(parseInt(t)).send({from:e}).then(function(){console.log("Claimed ",t)})})}function g(t){f(function(e){e&&y.methods.balanceOf(e).call().then(function(n){console.log("balanceOf(account): ",n,[e]);for(var a=0;a<n;a++)y.methods.tokenOfOwnerByIndex(e,a).call().then(function(e){t(e)})})})}function M(t,e){f(function(n){console.log(n,e),y.methods.safeTransferFrom(n,t,e).send({from:n}).then(function(){return console.log("safeTransferFrom",n,t,e,"sent")})})}function I(){return"undefined"!==typeof a}function k(t){a.eth.net.getId().then(function(e){t(4==e),console.log(e)})}function O(){f(function(t){y.methods.withdraw().send({from:t}).then(function(){return console.log("ok")})})}},255:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return u});function a(t){if(window.localStorage){null==window.localStorage.getItem("waifuchain")&&window.localStorage.setItem("waifuchain",JSON.stringify({logbids:{},tutorial:{auction:!0,bid:!0,beforeReveal:!0,afterReveal:!0}}));var e=JSON.parse(window.localStorage.getItem("waifuchain"));return!e.logbids.hasOwnProperty(t)&&t&&(e.logbids[t]={}),e}return null}function o(){var t=a();t.tutorial={auction:!0,bid:!0,beforeReveal:!0,afterReveal:!0},window.localStorage.setItem("waifuchain",JSON.stringify(t))}function i(t){if(!a().tutorial){var e=a();e.tutorial={auction:!0,bid:!0,beforeReveal:!0,afterReveal:!0},window.localStorage.setItem("waifuchain",JSON.stringify(e))}switch(t){case"auction":return a().tutorial[t];case"bid":return a().tutorial[t]&&!a().tutorial.auction;case"beforeReveal":return a().tutorial[t]&&!a().tutorial.auction&&!a().tutorial.bid;case"afterReveal":return a().tutorial[t]&&!a().tutorial.auction&&!a().tutorial.bid&&!a().tutorial.beforeReveal;default:return a().tutorial[t]}}function u(t){var e=a();e&&(e.tutorial[t]=!1,window.localStorage.setItem("waifuchain",JSON.stringify(e)))}},294:function(t,e){t.exports.contractAddress="0x76ffb21b2c004e39aef756484c980ce8c81b7bd0",t.exports.ABI=[{constant:!0,inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_owner",type:"address"}],name:"voteFundOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"_tokenToProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBidder",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_URL",type:"string"}],name:"setBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_values",type:"uint256[]"},{name:"_fake",type:"bool[]"},{name:"_secret",type:"bytes32[]"}],name:"reveal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_profile",type:"string"}],name:"setWaifuProfile",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],name:"bids",outputs:[{name:"blindedBid",type:"bytes32"},{name:"deposit",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_profile",type:"string"}],name:"getWaifusInProfile",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"waifuIndex",type:"uint256"}],name:"claimWaifu",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBid",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"creationTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"}],name:"transferFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_blindedBid",type:"bytes32"}],name:"bid",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_URL",type:"string"}],name:"voteBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getWaifuProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"waifuIndex",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"approved",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"}]},330:function(t,e){},331:function(t,e){},333:function(t,e){},338:function(t,e){},339:function(t,e){},347:function(t,e){},353:function(t,e,n){},354:function(t,e,n){},355:function(t,e,n){}}]);
//# sourceMappingURL=4.ea4b8041.chunk.js.map