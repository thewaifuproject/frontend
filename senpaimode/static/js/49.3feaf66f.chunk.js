(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{269:function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"a",function(){return c}),a.d(e,"c",function(){return m});var n,i=a(308),o=a(325),s=a.n(o),u=a(287),l=a.n(u);window.web3&&(n=new s.a(window.web3.currentProvider));var p=new n.eth.Contract(l.a.ABI,l.a.contractAddress);function r(t,e){p.methods.creationTime().call().then(function(a){var n=Number(a),i=(new Date).getTime()+(864e5-((new Date).getTime()-1e3*n)%864e5),o=Math.floor((new Date-1e3*n)/864e5),s=Math.floor(o/30);if(s>3)return[];var u=Math.pow(2,3-s),l=450-(1-Math.pow(2,4-s))/-1*30+u*(o%30);t(i,e>=l)})}function c(t){p.methods.creationTime().call().then(function(e){var a=Math.floor((new Date-1e3*Number(e))/864e5),n=Math.floor(a/30);if(n>3)return[];var o=Math.pow(2,3-n),s=450-(1-Math.pow(2,4-n))/-1*30+o*(a%30);t(Object(i.a)(Array(o).keys()).map(function(t){return t+s}))})}function m(t,e,a){n.eth.getAccounts().then(function(i){console.log(i[0],t,e,a),function(t,e,a,i){var o=(s=0,u=999999999999999,Math.floor(Math.random()*(u-s))+s);var s,u;p.methods.bid(e,n.utils.soliditySha3(n.utils.toWei(a),n.utils.toWei(i),o)).send({from:t,value:n.utils.toWei(a)}).then(function(){!function(t,e,a,n,i){var o={real:[a],fake:[n],secret:[i]};null==localStorage.getItem("waifuchain")&&localStorage.setItem("waifuchain",JSON.stringify({logbids:{}}));var s=JSON.parse(localStorage.getItem("waifuchain"));s.logbids.hasOwnProperty(t)||(s.logbids[t]={});s.logbids[t].hasOwnProperty(e)?(s.logbids[t][e].real.push(o.real[0]),s.logbids[t][e].fake.push(o.fake[0]),s.logbids[t][e].secret.push(o.secret[0])):s.logbids[t][e]=o;localStorage.setItem("waifuchain",JSON.stringify(s))}(t,e,a,i,o),console.log("puja realizada con exito")})}(i[0],t,e,a)})}},287:function(t,e){t.exports.contractAddress="0x76ffb21b2c004e39aef756484c980ce8c81b7bd0",t.exports.ABI=[{constant:!0,inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_owner",type:"address"}],name:"voteFundOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"_tokenToProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBidder",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_URL",type:"string"}],name:"setBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_values",type:"uint256[]"},{name:"_fake",type:"bool[]"},{name:"_secret",type:"bytes32[]"}],name:"reveal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_profile",type:"string"}],name:"setWaifuProfile",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],name:"bids",outputs:[{name:"blindedBid",type:"bytes32"},{name:"deposit",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_profile",type:"string"}],name:"getWaifusInProfile",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"waifuIndex",type:"uint256"}],name:"claimWaifu",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBid",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"creationTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"}],name:"transferFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_blindedBid",type:"bytes32"}],name:"bid",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_URL",type:"string"}],name:"voteBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getWaifuProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"waifuIndex",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"approved",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"}]},328:function(t,e){},329:function(t,e){},331:function(t,e){},336:function(t,e){},337:function(t,e){},345:function(t,e){},786:function(t,e,a){},789:function(t,e,a){},792:function(t,e,a){},842:function(t,e,a){"use strict";a.r(e);var n=a(85),i=a(86),o=a(88),s=a(87),u=a(89),l=a(1),p=a.n(l),r=a(241),c=a(90),m=(a(786),function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(o.a)(this,Object(s.a)(e).call(this,t))).toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.state={tooltipOpen:!1},a}return Object(u.a)(e,t),Object(i.a)(e,[{key:"toggle",value:function(){this.setState({tooltipOpen:!this.state.tooltipOpen})}},{key:"render",value:function(){return p.a.createElement("span",null,p.a.createElement("span",{className:"fa fa-question-circle",id:"Tooltip-"+this.props.id}),p.a.createElement(r.nb,{placement:this.props.pos,isOpen:this.state.tooltipOpen,target:"Tooltip-"+this.props.id,toggle:this.toggle},this.props.text))}}]),e}(p.a.Component)),y=a(269),d=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(o.a)(this,Object(s.a)(e).call(this,t))).updateCountDown=a.updateCountDown.bind(Object(c.a)(Object(c.a)(a))),a.toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.state={tooltipOpen:!1,countdown:""},y.b(function(t,e){a.setState({countDownDate:t,active:e})},a.props.wid),a}return Object(u.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=setInterval(this.updateCountDown,1e3);this.setState({intervalId:t})}},{key:"updateCountDown",value:function(){var t=(new Date).getTime(),e=this.state.countDownDate-t,a=Math.floor(e%864e5/36e5)+"h "+Math.floor(e%36e5/6e4)+"m "+Math.floor(e%6e4/1e3)+"s ";(e<0||!this.state.active)&&(clearInterval(this.state.intervalId),a="BID TIME HAS ENDED"),this.setState({countdown:a})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"toggle",value:function(){this.setState({tooltipOpen:!this.state.tooltipOpen})}},{key:"onInputChangeReal",value:function(t){this.setState({realBidValue:t.target.value})}},{key:"onInputChangeFake",value:function(t){this.setState({fakeBidValue:t.target.value})}},{key:"bid",value:function(){console.log(this.state.realBidValue),this.state.realBidValue<=this.state.fakeBidValue&&y.c(this.props.wid,this.state.realBidValue,this.state.fakeBidValue)}},{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement(r.i,{outline:!0,color:"secondary"},p.a.createElement(r.j,null,p.a.createElement(r.y,null,p.a.createElement(r.jb,null,p.a.createElement(r.w,{xs:"12",sm:"6"},p.a.createElement("div",null,"Real bid \xa0",p.a.createElement(m,{pos:"right",id:"realq",text:b})),p.a.createElement(r.J,null,p.a.createElement(r.I,{placeholder:"0.015",type:"number",onChange:this.onInputChangeReal.bind(this)}),p.a.createElement(r.K,{addonType:"append"},"ETH"))),p.a.createElement(r.w,{xs:"12",sm:"6"},p.a.createElement("div",null,"Fake bid \xa0",p.a.createElement(m,{pos:"right",id:"fakeq",text:f})),p.a.createElement(r.J,null,p.a.createElement(r.I,{placeholder:"0.021",type:"number",onChange:this.onInputChangeFake.bind(this)}),p.a.createElement(r.K,{addonType:"append"},"ETH")))),p.a.createElement(r.jb,{className:"countdown-row"},p.a.createElement(r.w,null,p.a.createElement("div",{className:"float-left"},p.a.createElement("span",null,"Auction ends in:"),p.a.createElement("h2",null,this.state.countdown)))),p.a.createElement(r.jb,null,p.a.createElement(r.w,null,p.a.createElement(r.e,{color:"primary",className:"float-right",onClick:this.bid.bind(this)},"BID NOW")))))))}}]),e}(l.Component),b="Enter here how much do you want to bid on the waifu in ETH",f="Enter here an arbitrary value greater than or equal to your real bid",h=(a(789),a(247)),w=a.n(h),v=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(o.a)(this,Object(s.a)(e).call(this,t))).toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.state={activeTab:"1"},a}return Object(u.a)(e,t),Object(i.a)(e,[{key:"toggle",value:function(t){this.state.activeTab!==t&&this.setState({activeTab:t})}},{key:"render",value:function(){var t=this;return p.a.createElement("div",null,p.a.createElement(r.W,{tabs:!0},p.a.createElement(r.X,null,p.a.createElement(r.Y,{className:w()({active:"1"===this.state.activeTab}),onClick:function(){t.toggle("1")}},"Information")),p.a.createElement(r.X,null,p.a.createElement(r.Y,{className:w()({active:"2"===this.state.activeTab}),onClick:function(){t.toggle("2")}},"How auctions work"))),p.a.createElement(r.kb,{activeTab:this.state.activeTab},p.a.createElement(r.lb,{tabId:"1"},p.a.createElement(r.jb,null,p.a.createElement(r.w,{sm:"12"},p.a.createElement("h4",null,"Biography"),p.a.createElement(r.e,{outline:!0,color:"primary"},"Know more on the wiki")))),p.a.createElement(r.lb,{tabId:"2"},g)))}}]),e}(l.Component),g="The bid you made and the bids other users made are completely private. To assure that privacy, each user will make two bids, one \u201creal\u201d and another one \u201cfake\u201d. Only when the bidding process ends, you will know if you got the waifu. After that, the user has to manually take action to claim the waifu.",E=(a(792),function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(o.a)(this,Object(s.a)(e).call(this,t))).state={waifuId:a.props.match.params.id},a}return Object(u.a)(e,t),Object(i.a)(e,[{key:"componentWillMount",value:function(){var t=this;fetch("https://api.waifuchain.moe/?waifu="+this.state.waifuId).then(function(t){return t.clone().json()}).then(function(e){t.setState({waifuName:e.name,waifuImage:e.image,waifuDescription:e.description})}).catch(function(t){console.log("Hubo un problema con la petici\xf3n Fetch:"+t.message)})}},{key:"render",value:function(){return p.a.createElement(r.D,{timeout:this.state.timeout,in:this.state.fadeIn},p.a.createElement(r.y,{className:"_main-container"},p.a.createElement(r.jb,null,p.a.createElement(r.w,{className:"image-container",xs:"12",md:"4"},p.a.createElement("h1",null,this.state.waifuName),p.a.createElement("img",{width:"100%",src:this.state.waifuImage})),p.a.createElement(r.w,{className:"info-container",xs:"12",md:"8"},p.a.createElement("div",null,p.a.createElement("h1",null,this.state.waifuName),p.a.createElement("p",null,this.state.waifuDescription)),p.a.createElement(d,{wid:this.state.waifuId}))),p.a.createElement("div",{className:"tabs-container"},p.a.createElement(v,null))))}}]),e}(l.Component));e.default=E}}]);
//# sourceMappingURL=49.3feaf66f.chunk.js.map