(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{249:function(e,t,n){"use strict";var a=n(275),i=n(287),o=n.n(i),s=n(262),u=n.n(s);function l(e){if(window.localStorage){null==window.localStorage.getItem("waifuchain")&&window.localStorage.setItem("waifuchain",JSON.stringify({logbids:{}}));var t=JSON.parse(window.localStorage.getItem("waifuchain"));return t.logbids.hasOwnProperty(e)||(t.logbids[e]={}),t}return null}n.d(t,"e",function(){return m}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return y}),n.d(t,"k",function(){return h}),n.d(t,"i",function(){return b}),n.d(t,"h",function(){return g}),n.d(t,"c",function(){return w}),n.d(t,"g",function(){return v}),n.d(t,"b",function(){return O}),n.d(t,"a",function(){return k}),n.d(t,"j",function(){return E});var r,c="1543902712",p=new((r="undefined"!==typeof window.web3?new o.a(window.web3.currentProvider):new o.a(new o.a.providers.HttpProvider("http://localhost:8545"))).eth.Contract)(u.a.ABI,u.a.contractAddress);function m(){return Number(c)}function d(e){r.eth.getAccounts().then(function(t){e(t[0])})}function f(e){var t=Number(c),n=(new Date).getTime()+(864e5-((new Date).getTime()-1e3*t)%864e5),a=Math.floor((new Date-1e3*t)/864e5),i=Math.floor(a/30);if(i>3)return[];var o=Math.pow(2,3-i);return[n,e>=450-(1-Math.pow(2,4-i))/-1*30+o*(a%30)]}function y(){var e=Math.floor((new Date-1e3*Number(c))/864e5),t=Math.floor(e/30);if(t>3)return[];var n=Math.pow(2,3-t),i=450-(1-Math.pow(2,4-t))/-1*30+n*(e%30);return Object(a.a)(Array(n).keys()).map(function(e){return e+i})}function h(e,t,n,a){r.eth.getAccounts().then(function(i){a(!i.length),i.length&&(console.log(i[0],e,t,n),function(e,t,n,a){var i=r.utils.randomHex(32);p.methods.bid(parseInt(t),r.utils.soliditySha3({type:"uint256",value:r.utils.toWei(n)},{type:"bool",value:!1},{type:"bytes32",value:i})).send({from:e,value:r.utils.toWei(a)}).on("transactionHash",function(o){!function(e,t,n,a,i){var o={real:[n],fake:[a],secret:[i]},s=l(e);s&&(s.logbids[e].hasOwnProperty(t)?(s.logbids[e][t].real.push(o.real[0]),s.logbids[e][t].fake.push(o.fake[0]),s.logbids[e][t].secret.push(o.secret[0])):s.logbids[e][t]=o,window.localStorage.setItem("waifuchain",JSON.stringify(s)))}(e,t,n,a,i)})}(i[0],e,t,n))})}function b(){var e=Math.floor((new Date-1e3*Number(c))/864e5)-1,t=Math.floor(e/30);if(t>3)return[];var n=Math.pow(2,3-t),i=450-(1-Math.pow(2,4-t))/-1*30+n*(e%30),o=Object(a.a)(Array(n).keys()).map(function(e){return e+i}),s=JSON.parse(window.localStorage.getItem("waifuchain")).logbids;console.log(s),Object.keys(s).map(function(e){Object.keys(s[e]).map(function(t){if(console.log(o),o.indexOf(parseInt(t))<0)return-1;var n=[];s[e][t].real.forEach(function(e){return n.push(r.utils.toWei(e))});var a=[];s[e][t].fake.forEach(function(e){return a.push(!1)});var i=[];s[e][t].secret.forEach(function(e){return i.push(e)}),console.log("Reveal params: ",parseInt(t),n,a,i),p.methods.reveal(parseInt(t),n,a,i).send({from:e}).then(function(){console.log(parseInt(t),n,a,i)})})})}function g(e,t){d(function(n){var a=0,i=0,o=l(n).logbids;Object.keys(o).map(function(e){Object.keys(o[e]).map(function(e){a++})}),null!=o?(console.log(o),Object.keys(o).map(function(s){Object.keys(o[s]).map(function(o){p.methods.highestBidder(parseInt(o)).call().then(function(s){i++,e(o,s,n),t(a<=i)})})})):console.log("no storage")})}function w(e){d(function(t){p.methods.claimWaifu(parseInt(e)).send({from:t}).then(function(){console.log("Claimed ",e)})})}function v(e){d(function(t){t&&p.methods.balanceOf(t).call().then(function(n){console.log("balanceOf(account): ",n,[t]);for(var a=0;a<n;a++)p.methods.tokenOfOwnerByIndex(t,a).call().then(function(t){e(t)})})})}function E(e,t){d(function(n){console.log(n,t),p.methods.safeTransferFrom(n,e,t).send({from:n}).then(function(){return console.log("safeTransferFrom",n,e,t,"sent")})})}function O(){return!("undefined"!==typeof r)}function k(e){r.eth.net.getId().then(function(t){return e(4==t)})}},262:function(e,t){e.exports.contractAddress="0x76ffb21b2c004e39aef756484c980ce8c81b7bd0",e.exports.ABI=[{constant:!0,inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_owner",type:"address"}],name:"voteFundOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"_tokenToProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBidder",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_URL",type:"string"}],name:"setBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_values",type:"uint256[]"},{name:"_fake",type:"bool[]"},{name:"_secret",type:"bytes32[]"}],name:"reveal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_profile",type:"string"}],name:"setWaifuProfile",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],name:"bids",outputs:[{name:"blindedBid",type:"bytes32"},{name:"deposit",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_profile",type:"string"}],name:"getWaifusInProfile",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"waifuIndex",type:"uint256"}],name:"claimWaifu",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"highestBid",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"creationTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"}],name:"transferFunds",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_blindedBid",type:"bytes32"}],name:"bid",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_URL",type:"string"}],name:"voteBaseURL",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getWaifuProfile",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"waifuIndex",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"approved",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"}]},269:function(e,t,n){},276:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(85),o=n(86),s=n(89),u=n(87),l=n(88),r=n(90),c=n(1),p=n.n(c),m=n(241),d=(n(269),n(249)),f=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={modal:!1,address2send:""},n.toggle=n.toggle.bind(Object(r.a)(Object(r.a)(n))),n.handleAddressInputChange=n.handleAddressInputChange.bind(Object(r.a)(Object(r.a)(n))),n.sendWaifu=n.sendWaifu.bind(Object(r.a)(Object(r.a)(n))),n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"handleAddressInputChange",value:function(e){this.setState({address2send:e.target.value})}},{key:"sendWaifu",value:function(){d.j(this.state.address2send,this.props.waifuID),this.toggle()}},{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(m.e,{color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight",onClick:this.toggle},this.props.mainButtonText),p.a.createElement(m.S,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className,centered:!0,fade:!1},p.a.createElement(m.T,null,p.a.createElement("p",null,"Do you want to send ",this.props.waifuName," to someone else?"),p.a.createElement(m.J,null,p.a.createElement(m.K,{addonType:"prepend"},"Address"),p.a.createElement(m.I,{placeholder:"0x56c77d84caf29adc6f0bCd02e51a8a33a13Ed749",onChange:this.handleAddressInputChange}),p.a.createElement(m.K,{addonType:"prepend"},p.a.createElement(m.e,{color:"purple",onClick:this.sendWaifu},"Send"))))))}}]),t}(p.a.Component),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleButtonClick=function(){var e="#/waifus/".concat(n.props.id);window.location=e},n.handleButtonClick=n.handleButtonClick.bind(Object(r.a)(Object(r.a)(n))),n.toggle=n.toggle.bind(Object(r.a)(Object(r.a)(n))),n.claim=n.claim.bind(Object(r.a)(Object(r.a)(n))),n.state={dropdownOpen:!1,waifuShortBio:"",waifuName:"",buttonColor:"purple"},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"componentWillMount",value:function(){var e=this;fetch("https://api.waifuchain.moe/?waifu="+this.props.id).then(function(e){return e.clone().json()}).then(function(t){e.setState({waifuName:t.name,waifuImage:t.image,waifuDescription:t.description,waifuShortBio:h(t.description,50)})}).catch(function(e){console.log("Hubo un problema con la petici\xf3n Fetch:"+e.message)})}},{key:"componentWillUpdate",value:function(e,t){}},{key:"claim",value:function(){"claim"===this.props.typeT&&d.c(this.props.id)}},{key:"render",value:function(){var e=p.a.createElement(m.j,null,p.a.createElement(m.q,null,this.state.waifuName),p.a.createElement(m.p,null,h(this.state.waifuShortBio,50)),p.a.createElement(m.g,{className:"d-flex bd-highlight"},p.a.createElement("a",{className:"nostile width100",href:"https://waifu.wiki/index.php/"+this.state.waifuName.replace(" ","_"),target:"__blank"},p.a.createElement(m.e,{color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight width100",onClick:this.claim},this.props.mainButtonText))));if("drop"===this.props.typeT)e=p.a.createElement(m.j,null,p.a.createElement(m.q,null,this.state.waifuName),p.a.createElement(m.p,null,h(this.state.waifuShortBio,50)),p.a.createElement(m.g,{className:"d-flex bd-highlight"},p.a.createElement(m.e,{id:"buttontourjs",color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight",onClick:this.handleButtonClick},this.props.mainButtonText),p.a.createElement(m.f,{isOpen:this.state.dropdownOpen,toggle:this.toggle},p.a.createElement(m.C,{color:this.props.buttonColor,caret:!0}),p.a.createElement(m.B,null,p.a.createElement("a",{className:"nostile",href:"https://waifu.wiki/index.php/"+this.state.waifuName.replace(" ","_"),target:"__blank"},p.a.createElement(m.A,{className:"pointa"},"See on the wiki"))))));else if("claim"===this.props.typeT)e=p.a.createElement(m.j,null,p.a.createElement(m.q,null,this.state.waifuName),p.a.createElement(m.p,null,h(this.state.waifuShortBio,50)),p.a.createElement(m.g,{className:"d-flex bd-highlight"},p.a.createElement(m.e,{color:this.props.buttonColor,className:"p-2 flex-grow-1 bd-highlight width100",onClick:this.claim},this.props.mainButtonText)));else if("wallet"===this.props.typeT){var t;e=p.a.createElement(m.j,null,p.a.createElement(m.q,null,this.state.waifuName),p.a.createElement(m.p,null,h(this.state.waifuShortBio,50)),p.a.createElement(m.g,{className:"d-flex bd-highlight"},p.a.createElement(f,(a(t={mainButtonText:this.props.mainButtonText,buttonColor:this.props.buttonColor},"mainButtonText",this.props.mainButtonText),a(t,"waifuName",this.state.waifuName),a(t,"waifuID",this.props.id),t)),p.a.createElement(m.f,{isOpen:this.state.dropdownOpen,toggle:this.toggle},p.a.createElement(m.C,{color:this.props.buttonColor,caret:!0}),p.a.createElement(m.B,null,p.a.createElement("a",{className:"nostile"},p.a.createElement(m.A,{className:"pointa"},"Assign to... (soon available)"))))))}return p.a.createElement("div",null,p.a.createElement(m.i,null,p.a.createElement(m.o,{className:"fixedH-auction",width:"100%",src:this.state.waifuImage,alt:this.state.waifuImage}),e))}}]),t}(c.Component);function h(e,t){return e.slice(0,t)+(e.length>t?"...":"")}t.a=y},290:function(e,t){},291:function(e,t){},293:function(e,t){},295:function(e,t){},296:function(e,t){},298:function(e,t){},815:function(e,t,n){},876:function(e,t,n){"use strict";n.r(t);var a=n(275),i=n(85),o=n(86),s=n(89),u=n(87),l=n(88),r=n(90),c=n(1),p=n.n(c),m=n(241),d=n(276),f=(n(815),n(249));function y(){var e=JSON.parse(localStorage.getItem("waifuchain"));return null==e?null:e.logbids}var h=function(e){var t=e.bidresults;return p.a.createElement(p.a.Fragment,null,t.map(function(e){return p.a.createElement(m.w,{lg:"3",md:"4",sm:"6",key:e.id},p.a.createElement(d.a,{id:e.id,mainButtonText:e.mine?"Mine!":e.pending?"Pending":e.own?"Claim now":"See on the wiki",typeT:e.mine?"mineH":e.pending?"pending":e.own?"claim":"lost",buttonColor:e.mine?"success":e.pending?"purple":e.own?"success":"warning"}))}))},b=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggle=n.toggle.bind(Object(r.a)(Object(r.a)(n))),n.toggleFade=n.toggleFade.bind(Object(r.a)(Object(r.a)(n))),n.getWaifus=n.getWaifus.bind(Object(r.a)(Object(r.a)(n))),n.revealAll=n.revealAll.bind(Object(r.a)(Object(r.a)(n))),n.setWaifuName=n.setWaifuName.bind(Object(r.a)(Object(r.a)(n))),n.setown=n.setown.bind(Object(r.a)(Object(r.a)(n))),n.state={collapse:!0,fadeIn:!0,timeout:300,bidresults:[],waifuslog:y(),waifuNames:{},endCallHighestBidder:!1};var o=Math.floor((new Date-1e3*Number(f.e()))/864e5)-1,l=Math.floor(o/30);if(l>3)return Object(s.a)(n,[]);var c=Math.pow(2,3-l),p=450-(1-Math.pow(2,4-l))/-1*30+c*(o%30),m=Object(a.a)(Array(c).keys()).map(function(e){return e+p});return f.h(function(e,t,a){n.setState({bidresults:n.state.bidresults.concat({id:e,own:t===a,pending:e>=m[0],mine:!1})})},function(e){n.setState({endCallHighestBidder:e}),e&&n.setown()}),n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"setown",value:function(){var e=this;f.g(function(t){e.state.bidresults.forEach(function(n,a){if(n.id==t){var i=e.state.bidresults;i[a].mine=!0,e.setState({bidresults:i})}})})}},{key:"componentWillMount",value:function(){var e=this;Object.keys(this.state.waifuslog).map(function(t){return Object.keys(e.state.waifuslog[t]).map(function(t){return fetch("https://api.waifuchain.moe/?waifu="+t).then(function(e){return e.clone().json()}).then(function(n){e.setWaifuName(t,n.name)}).catch(function(e){console.log("Hubo un problema con la petici\xf3n Fetch:"+e.message)})})})}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"toggleFade",value:function(){this.setState(function(e){return{fadeIn:!e}})}},{key:"getWaifus",value:function(){var e=this,t=[];return null===this.state.waifuslog||0==Object.keys(this.state.waifuslog).length?t.push():Object.keys(this.state.waifuslog).map(function(n){return Object.keys(e.state.waifuslog[n]).map(function(a){for(var i=0;i<e.state.waifuslog[n][a].real.length;i++)t.unshift(p.a.createElement("tr",{key:a},p.a.createElement("th",{scope:"row"},a),p.a.createElement("td",null,e.state.waifuNames[a]),p.a.createElement("td",null,e.state.waifuslog[n][a].real[i]),p.a.createElement("td",null,e.state.waifuslog[n][a].fake[i]),p.a.createElement("td",null,e.state.waifuslog[n][a].secret[i]),p.a.createElement("td",null,n)))})}),t}},{key:"revealAll",value:function(){f.i()}},{key:"setWaifuName",value:function(e,t){var n=this.state.waifuNames;n[e]=t,this.setState({waifuNames:n})}},{key:"render",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement(m.D,{timeout:this.state.timeout,in:this.state.fadeIn},p.a.createElement(m.y,{className:"content-container"},p.a.createElement("h1",null,"History bid"),p.a.createElement(m.mb,{hover:!0,responsive:!0},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Waifu ID"),p.a.createElement("th",null,"Name"),p.a.createElement("th",null,"Real bid"),p.a.createElement("th",null,"Fake bid"),p.a.createElement("th",null,"Secret"),p.a.createElement("th",null,"Account"))),p.a.createElement("tbody",null,this.getWaifus().map(function(e){return e}))),p.a.createElement(m.e,{color:"success",onClick:this.revealAll},"REVEAL ALL")),p.a.createElement("h1",null),p.a.createElement(m.y,{className:"content-container"},p.a.createElement("h1",{className:"main-table"},"Results"),p.a.createElement(m.jb,{className:"main-table"},p.a.createElement(h,{bidresults:this.state.bidresults})))))}}]),t}(c.Component);t.default=b}}]);
//# sourceMappingURL=53.99db44c9.chunk.js.map